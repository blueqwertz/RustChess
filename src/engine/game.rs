use std::collections::HashMap;
use std::path::{Prefix, PrefixComponent};
use crate::engine::bitboard::{BitBoard, BitPos, Color, Square};
use crate::engine::movegen::{Move, movegen};
use crate::engine::bitboard::Kind::Undefined;

pub struct PrecomputedBitBoards {
    pub rook_directions: [[BitBoard; 4]; 64],
    pub bishop_directions: [[BitBoard; 4]; 64],

    pub knight_boards: [BitBoard; 64],
}

impl PrecomputedBitBoards {
    fn new() -> Self {
        Self {
            knight_boards: [
                BitBoard::from(132096),
                BitBoard::from(329728),
                BitBoard::from(659712),
                BitBoard::from(1319424),
                BitBoard::from(2638848),
                BitBoard::from(5277696),
                BitBoard::from(10489856),
                BitBoard::from(4202496),
                BitBoard::from(33816580),
                BitBoard::from(84410376),
                BitBoard::from(168886289),
                BitBoard::from(337772578),
                BitBoard::from(675545156),
                BitBoard::from(1351090312),
                BitBoard::from(2685403152),
                BitBoard::from(1075839008),
                BitBoard::from(8657044482),
                BitBoard::from(21609056261),
                BitBoard::from(43234889994),
                BitBoard::from(86469779988),
                BitBoard::from(172939559976),
                BitBoard::from(345879119952),
                BitBoard::from(687463207072),
                BitBoard::from(275414786112),
                BitBoard::from(2216203387392),
                BitBoard::from(5531918402816),
                BitBoard::from(11068131838464),
                BitBoard::from(22136263676928),
                BitBoard::from(44272527353856),
                BitBoard::from(88545054707712),
                BitBoard::from(175990581010432),
                BitBoard::from(70506185244672),
                BitBoard::from(567348067172352),
                BitBoard::from(1416171111120896),
                BitBoard::from(2833441750646784),
                BitBoard::from(5666883501293568),
                BitBoard::from(11333767002587136),
                BitBoard::from(22667534005174272),
                BitBoard::from(45053588738670592),
                BitBoard::from(18049583422636032),
                BitBoard::from(145241105196122112),
                BitBoard::from(362539804446949376),
                BitBoard::from(725361088165576704),
                BitBoard::from(1450722176331153408),
                BitBoard::from(2901444352662306816),
                BitBoard::from(5802888705324613632),
                BitBoard::from(11533718717099671552),
                BitBoard::from(4620693356194824192),
                BitBoard::from(288234782788157440),
                BitBoard::from(576469569871282176),
                BitBoard::from(1224997833292120064),
                BitBoard::from(2449995666584240128),
                BitBoard::from(4899991333168480256),
                BitBoard::from(9799982666336960512),
                BitBoard::from(1152939783987658752),
                BitBoard::from(2305878468463689728),
                BitBoard::from(1128098930098176),
                BitBoard::from(2257297371824128),
                BitBoard::from(4796069720358912),
                BitBoard::from(9592139440717824),
                BitBoard::from(19184278881435648),
                BitBoard::from(38368557762871296),
                BitBoard::from(4679521487814656),
                BitBoard::from(9077567998918656),
            ],
            bishop_directions: [
                [
                    BitBoard::from(0),
                    BitBoard::from(0),
                    BitBoard::from(9241421688590303744),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(0),
                    BitBoard::from(0),
                    BitBoard::from(36099303471055872),
                    BitBoard::from(256),
                ],
                [
                    BitBoard::from(0),
                    BitBoard::from(0),
                    BitBoard::from(141012904183808),
                    BitBoard::from(66048),
                ],
                [
                    BitBoard::from(0),
                    BitBoard::from(0),
                    BitBoard::from(550831656960),
                    BitBoard::from(16909312),
                ],
                [
                    BitBoard::from(0),
                    BitBoard::from(0),
                    BitBoard::from(2151686144),
                    BitBoard::from(4328785920),
                ],
                [
                    BitBoard::from(0),
                    BitBoard::from(0),
                    BitBoard::from(8404992),
                    BitBoard::from(1108169199616),
                ],
                [
                    BitBoard::from(0),
                    BitBoard::from(0),
                    BitBoard::from(32768),
                    BitBoard::from(283691315109888),
                ],
                [
                    BitBoard::from(0),
                    BitBoard::from(0),
                    BitBoard::from(0),
                    BitBoard::from(72624976668147712),
                ],
                [
                    BitBoard::from(0),
                    BitBoard::from(2),
                    BitBoard::from(4620710844295151616),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(1),
                    BitBoard::from(4),
                    BitBoard::from(9241421688590303232),
                    BitBoard::from(65536),
                ],
                [
                    BitBoard::from(2),
                    BitBoard::from(8),
                    BitBoard::from(36099303471054848),
                    BitBoard::from(16908288),
                ],
                [
                    BitBoard::from(4),
                    BitBoard::from(16),
                    BitBoard::from(141012904181760),
                    BitBoard::from(4328783872),
                ],
                [
                    BitBoard::from(8),
                    BitBoard::from(32),
                    BitBoard::from(550831652864),
                    BitBoard::from(1108169195520),
                ],
                [
                    BitBoard::from(16),
                    BitBoard::from(64),
                    BitBoard::from(2151677952),
                    BitBoard::from(283691315101696),
                ],
                [
                    BitBoard::from(32),
                    BitBoard::from(128),
                    BitBoard::from(8388608),
                    BitBoard::from(72624976668131328),
                ],
                [
                    BitBoard::from(64),
                    BitBoard::from(0),
                    BitBoard::from(0),
                    BitBoard::from(145249953336262656),
                ],
                [
                    BitBoard::from(0),
                    BitBoard::from(516),
                    BitBoard::from(2310355422147510272),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(256),
                    BitBoard::from(1032),
                    BitBoard::from(4620710844295020544),
                    BitBoard::from(16777216),
                ],
                [
                    BitBoard::from(513),
                    BitBoard::from(2064),
                    BitBoard::from(9241421688590041088),
                    BitBoard::from(4328521728),
                ],
                [
                    BitBoard::from(1026),
                    BitBoard::from(4128),
                    BitBoard::from(36099303470530560),
                    BitBoard::from(1108168671232),
                ],
                [
                    BitBoard::from(2052),
                    BitBoard::from(8256),
                    BitBoard::from(141012903133184),
                    BitBoard::from(283691314053120),
                ],
                [
                    BitBoard::from(4104),
                    BitBoard::from(16512),
                    BitBoard::from(550829555712),
                    BitBoard::from(72624976666034176),
                ],
                [
                    BitBoard::from(8208),
                    BitBoard::from(32768),
                    BitBoard::from(2147483648),
                    BitBoard::from(145249953332068352),
                ],
                [
                    BitBoard::from(16416),
                    BitBoard::from(0),
                    BitBoard::from(0),
                    BitBoard::from(290499906664136704),
                ],
                [
                    BitBoard::from(0),
                    BitBoard::from(132104),
                    BitBoard::from(1155177711056977920),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(65536),
                    BitBoard::from(264208),
                    BitBoard::from(2310355422113955840),
                    BitBoard::from(4294967296),
                ],
                [
                    BitBoard::from(131328),
                    BitBoard::from(528416),
                    BitBoard::from(4620710844227911680),
                    BitBoard::from(1108101562368),
                ],
                [
                    BitBoard::from(262657),
                    BitBoard::from(1056832),
                    BitBoard::from(9241421688455823360),
                    BitBoard::from(283691179835392),
                ],
                [
                    BitBoard::from(525314),
                    BitBoard::from(2113664),
                    BitBoard::from(36099303202095104),
                    BitBoard::from(72624976397598720),
                ],
                [
                    BitBoard::from(1050628),
                    BitBoard::from(4227072),
                    BitBoard::from(141012366262272),
                    BitBoard::from(145249952795197440),
                ],
                [
                    BitBoard::from(2101256),
                    BitBoard::from(8388608),
                    BitBoard::from(549755813888),
                    BitBoard::from(290499905590394880),
                ],
                [
                    BitBoard::from(4202512),
                    BitBoard::from(0),
                    BitBoard::from(0),
                    BitBoard::from(580999811180789760),
                ],
                [
                    BitBoard::from(0),
                    BitBoard::from(33818640),
                    BitBoard::from(577588851233521664),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(16777216),
                    BitBoard::from(67637280),
                    BitBoard::from(1155177702467043328),
                    BitBoard::from(1099511627776),
                ],
                [
                    BitBoard::from(33619968),
                    BitBoard::from(135274560),
                    BitBoard::from(2310355404934086656),
                    BitBoard::from(283673999966208),
                ],
                [
                    BitBoard::from(67240192),
                    BitBoard::from(270549120),
                    BitBoard::from(4620710809868173312),
                    BitBoard::from(72624942037860352),
                ],
                [
                    BitBoard::from(134480385),
                    BitBoard::from(541097984),
                    BitBoard::from(9241421619736346624),
                    BitBoard::from(145249884075720704),
                ],
                [
                    BitBoard::from(268960770),
                    BitBoard::from(1082130432),
                    BitBoard::from(36099165763141632),
                    BitBoard::from(290499768151441408),
                ],
                [
                    BitBoard::from(537921540),
                    BitBoard::from(2147483648),
                    BitBoard::from(140737488355328),
                    BitBoard::from(580999536302882816),
                ],
                [
                    BitBoard::from(1075843080),
                    BitBoard::from(0),
                    BitBoard::from(0),
                    BitBoard::from(1161999072605765632),
                ],
                [
                    BitBoard::from(0),
                    BitBoard::from(8657571872),
                    BitBoard::from(288793326105133056),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(4294967296),
                    BitBoard::from(17315143744),
                    BitBoard::from(577586652210266112),
                    BitBoard::from(281474976710656),
                ],
                [
                    BitBoard::from(8606711808),
                    BitBoard::from(34630287488),
                    BitBoard::from(1155173304420532224),
                    BitBoard::from(72620543991349248),
                ],
                [
                    BitBoard::from(17213489152),
                    BitBoard::from(69260574720),
                    BitBoard::from(2310346608841064448),
                    BitBoard::from(145241087982698496),
                ],
                [
                    BitBoard::from(34426978560),
                    BitBoard::from(138521083904),
                    BitBoard::from(4620693217682128896),
                    BitBoard::from(290482175965396992),
                ],
                [
                    BitBoard::from(68853957121),
                    BitBoard::from(277025390592),
                    BitBoard::from(9241386435364257792),
                    BitBoard::from(580964351930793984),
                ],
                [
                    BitBoard::from(137707914242),
                    BitBoard::from(549755813888),
                    BitBoard::from(36028797018963968),
                    BitBoard::from(1161928703861587968),
                ],
                [
                    BitBoard::from(275415828484),
                    BitBoard::from(0),
                    BitBoard::from(0),
                    BitBoard::from(2323857407723175936),
                ],
                [
                    BitBoard::from(0),
                    BitBoard::from(2216338399296),
                    BitBoard::from(144115188075855872),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(1099511627776),
                    BitBoard::from(4432676798592),
                    BitBoard::from(288230376151711744),
                    BitBoard::from(72057594037927936),
                ],
                [
                    BitBoard::from(2203318222848),
                    BitBoard::from(8865353596928),
                    BitBoard::from(576460752303423488),
                    BitBoard::from(144115188075855872),
                ],
                [
                    BitBoard::from(4406653222912),
                    BitBoard::from(17730707128320),
                    BitBoard::from(1152921504606846976),
                    BitBoard::from(288230376151711744),
                ],
                [
                    BitBoard::from(8813306511360),
                    BitBoard::from(35461397479424),
                    BitBoard::from(2305843009213693952),
                    BitBoard::from(576460752303423488),
                ],
                [
                    BitBoard::from(17626613022976),
                    BitBoard::from(70918499991552),
                    BitBoard::from(4611686018427387904),
                    BitBoard::from(1152921504606846976),
                ],
                [
                    BitBoard::from(35253226045953),
                    BitBoard::from(140737488355328),
                    BitBoard::from(9223372036854775808),
                    BitBoard::from(2305843009213693952),
                ],
                [
                    BitBoard::from(70506452091906),
                    BitBoard::from(0),
                    BitBoard::from(0),
                    BitBoard::from(4611686018427387904),
                ],
                [
                    BitBoard::from(0),
                    BitBoard::from(567382630219904),
                    BitBoard::from(0),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(281474976710656),
                    BitBoard::from(1134765260439552),
                    BitBoard::from(0),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(564049465049088),
                    BitBoard::from(2269530520813568),
                    BitBoard::from(0),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(1128103225065472),
                    BitBoard::from(4539061024849920),
                    BitBoard::from(0),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(2256206466908160),
                    BitBoard::from(9078117754732544),
                    BitBoard::from(0),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(4512412933881856),
                    BitBoard::from(18155135997837312),
                    BitBoard::from(0),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(9024825867763968),
                    BitBoard::from(36028797018963968),
                    BitBoard::from(0),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(18049651735527937),
                    BitBoard::from(0),
                    BitBoard::from(0),
                    BitBoard::from(0),
                ],
            ],
            rook_directions: [
                [
                    BitBoard::from(0),
                    BitBoard::from(254),
                    BitBoard::from(72340172838076672),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(0),
                    BitBoard::from(252),
                    BitBoard::from(144680345676153344),
                    BitBoard::from(1),
                ],
                [
                    BitBoard::from(0),
                    BitBoard::from(248),
                    BitBoard::from(289360691352306688),
                    BitBoard::from(3),
                ],
                [
                    BitBoard::from(0),
                    BitBoard::from(240),
                    BitBoard::from(578721382704613376),
                    BitBoard::from(7),
                ],
                [
                    BitBoard::from(0),
                    BitBoard::from(224),
                    BitBoard::from(1157442765409226752),
                    BitBoard::from(15),
                ],
                [
                    BitBoard::from(0),
                    BitBoard::from(192),
                    BitBoard::from(2314885530818453504),
                    BitBoard::from(31),
                ],
                [
                    BitBoard::from(0),
                    BitBoard::from(128),
                    BitBoard::from(4629771061636907008),
                    BitBoard::from(63),
                ],
                [
                    BitBoard::from(0),
                    BitBoard::from(0),
                    BitBoard::from(9259542123273814016),
                    BitBoard::from(127),
                ],
                [
                    BitBoard::from(1),
                    BitBoard::from(65024),
                    BitBoard::from(72340172838076416),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(2),
                    BitBoard::from(64512),
                    BitBoard::from(144680345676152832),
                    BitBoard::from(256),
                ],
                [
                    BitBoard::from(4),
                    BitBoard::from(63488),
                    BitBoard::from(289360691352305664),
                    BitBoard::from(768),
                ],
                [
                    BitBoard::from(8),
                    BitBoard::from(61440),
                    BitBoard::from(578721382704611328),
                    BitBoard::from(1792),
                ],
                [
                    BitBoard::from(16),
                    BitBoard::from(57344),
                    BitBoard::from(1157442765409222656),
                    BitBoard::from(3840),
                ],
                [
                    BitBoard::from(32),
                    BitBoard::from(49152),
                    BitBoard::from(2314885530818445312),
                    BitBoard::from(7936),
                ],
                [
                    BitBoard::from(64),
                    BitBoard::from(32768),
                    BitBoard::from(4629771061636890624),
                    BitBoard::from(16128),
                ],
                [
                    BitBoard::from(128),
                    BitBoard::from(0),
                    BitBoard::from(9259542123273781248),
                    BitBoard::from(32512),
                ],
                [
                    BitBoard::from(257),
                    BitBoard::from(16646144),
                    BitBoard::from(72340172838010880),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(514),
                    BitBoard::from(16515072),
                    BitBoard::from(144680345676021760),
                    BitBoard::from(65536),
                ],
                [
                    BitBoard::from(1028),
                    BitBoard::from(16252928),
                    BitBoard::from(289360691352043520),
                    BitBoard::from(196608),
                ],
                [
                    BitBoard::from(2056),
                    BitBoard::from(15728640),
                    BitBoard::from(578721382704087040),
                    BitBoard::from(458752),
                ],
                [
                    BitBoard::from(4112),
                    BitBoard::from(14680064),
                    BitBoard::from(1157442765408174080),
                    BitBoard::from(983040),
                ],
                [
                    BitBoard::from(8224),
                    BitBoard::from(12582912),
                    BitBoard::from(2314885530816348160),
                    BitBoard::from(2031616),
                ],
                [
                    BitBoard::from(16448),
                    BitBoard::from(8388608),
                    BitBoard::from(4629771061632696320),
                    BitBoard::from(4128768),
                ],
                [
                    BitBoard::from(32896),
                    BitBoard::from(0),
                    BitBoard::from(9259542123265392640),
                    BitBoard::from(8323072),
                ],
                [
                    BitBoard::from(65793),
                    BitBoard::from(4261412864),
                    BitBoard::from(72340172821233664),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(131586),
                    BitBoard::from(4227858432),
                    BitBoard::from(144680345642467328),
                    BitBoard::from(16777216),
                ],
                [
                    BitBoard::from(263172),
                    BitBoard::from(4160749568),
                    BitBoard::from(289360691284934656),
                    BitBoard::from(50331648),
                ],
                [
                    BitBoard::from(526344),
                    BitBoard::from(4026531840),
                    BitBoard::from(578721382569869312),
                    BitBoard::from(117440512),
                ],
                [
                    BitBoard::from(1052688),
                    BitBoard::from(3758096384),
                    BitBoard::from(1157442765139738624),
                    BitBoard::from(251658240),
                ],
                [
                    BitBoard::from(2105376),
                    BitBoard::from(3221225472),
                    BitBoard::from(2314885530279477248),
                    BitBoard::from(520093696),
                ],
                [
                    BitBoard::from(4210752),
                    BitBoard::from(2147483648),
                    BitBoard::from(4629771060558954496),
                    BitBoard::from(1056964608),
                ],
                [
                    BitBoard::from(8421504),
                    BitBoard::from(0),
                    BitBoard::from(9259542121117908992),
                    BitBoard::from(2130706432),
                ],
                [
                    BitBoard::from(16843009),
                    BitBoard::from(1090921693184),
                    BitBoard::from(72340168526266368),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(33686018),
                    BitBoard::from(1082331758592),
                    BitBoard::from(144680337052532736),
                    BitBoard::from(4294967296),
                ],
                [
                    BitBoard::from(67372036),
                    BitBoard::from(1065151889408),
                    BitBoard::from(289360674105065472),
                    BitBoard::from(12884901888),
                ],
                [
                    BitBoard::from(134744072),
                    BitBoard::from(1030792151040),
                    BitBoard::from(578721348210130944),
                    BitBoard::from(30064771072),
                ],
                [
                    BitBoard::from(269488144),
                    BitBoard::from(962072674304),
                    BitBoard::from(1157442696420261888),
                    BitBoard::from(64424509440),
                ],
                [
                    BitBoard::from(538976288),
                    BitBoard::from(824633720832),
                    BitBoard::from(2314885392840523776),
                    BitBoard::from(133143986176),
                ],
                [
                    BitBoard::from(1077952576),
                    BitBoard::from(549755813888),
                    BitBoard::from(4629770785681047552),
                    BitBoard::from(270582939648),
                ],
                [
                    BitBoard::from(2155905152),
                    BitBoard::from(0),
                    BitBoard::from(9259541571362095104),
                    BitBoard::from(545460846592),
                ],
                [
                    BitBoard::from(4311810305),
                    BitBoard::from(279275953455104),
                    BitBoard::from(72339069014638592),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(8623620610),
                    BitBoard::from(277076930199552),
                    BitBoard::from(144678138029277184),
                    BitBoard::from(1099511627776),
                ],
                [
                    BitBoard::from(17247241220),
                    BitBoard::from(272678883688448),
                    BitBoard::from(289356276058554368),
                    BitBoard::from(3298534883328),
                ],
                [
                    BitBoard::from(34494482440),
                    BitBoard::from(263882790666240),
                    BitBoard::from(578712552117108736),
                    BitBoard::from(7696581394432),
                ],
                [
                    BitBoard::from(68988964880),
                    BitBoard::from(246290604621824),
                    BitBoard::from(1157425104234217472),
                    BitBoard::from(16492674416640),
                ],
                [
                    BitBoard::from(137977929760),
                    BitBoard::from(211106232532992),
                    BitBoard::from(2314850208468434944),
                    BitBoard::from(34084860461056),
                ],
                [
                    BitBoard::from(275955859520),
                    BitBoard::from(140737488355328),
                    BitBoard::from(4629700416936869888),
                    BitBoard::from(69269232549888),
                ],
                [
                    BitBoard::from(551911719040),
                    BitBoard::from(0),
                    BitBoard::from(9259400833873739776),
                    BitBoard::from(139637976727552),
                ],
                [
                    BitBoard::from(1103823438081),
                    BitBoard::from(71494644084506624),
                    BitBoard::from(72057594037927936),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(2207646876162),
                    BitBoard::from(70931694131085312),
                    BitBoard::from(144115188075855872),
                    BitBoard::from(281474976710656),
                ],
                [
                    BitBoard::from(4415293752324),
                    BitBoard::from(69805794224242688),
                    BitBoard::from(288230376151711744),
                    BitBoard::from(844424930131968),
                ],
                [
                    BitBoard::from(8830587504648),
                    BitBoard::from(67553994410557440),
                    BitBoard::from(576460752303423488),
                    BitBoard::from(1970324836974592),
                ],
                [
                    BitBoard::from(17661175009296),
                    BitBoard::from(63050394783186944),
                    BitBoard::from(1152921504606846976),
                    BitBoard::from(4222124650659840),
                ],
                [
                    BitBoard::from(35322350018592),
                    BitBoard::from(54043195528445952),
                    BitBoard::from(2305843009213693952),
                    BitBoard::from(8725724278030336),
                ],
                [
                    BitBoard::from(70644700037184),
                    BitBoard::from(36028797018963968),
                    BitBoard::from(4611686018427387904),
                    BitBoard::from(17732923532771328),
                ],
                [
                    BitBoard::from(141289400074368),
                    BitBoard::from(0),
                    BitBoard::from(9223372036854775808),
                    BitBoard::from(35747322042253312),
                ],
                [
                    BitBoard::from(282578800148737),
                    BitBoard::from(18302628885633695744),
                    BitBoard::from(0),
                    BitBoard::from(0),
                ],
                [
                    BitBoard::from(565157600297474),
                    BitBoard::from(18158513697557839872),
                    BitBoard::from(0),
                    BitBoard::from(72057594037927936),
                ],
                [
                    BitBoard::from(1130315200594948),
                    BitBoard::from(17870283321406128128),
                    BitBoard::from(0),
                    BitBoard::from(216172782113783808),
                ],
                [
                    BitBoard::from(2260630401189896),
                    BitBoard::from(17293822569102704640),
                    BitBoard::from(0),
                    BitBoard::from(504403158265495552),
                ],
                [
                    BitBoard::from(4521260802379792),
                    BitBoard::from(16140901064495857664),
                    BitBoard::from(0),
                    BitBoard::from(1080863910568919040),
                ],
                [
                    BitBoard::from(9042521604759584),
                    BitBoard::from(13835058055282163712),
                    BitBoard::from(0),
                    BitBoard::from(2233785415175766016),
                ],
                [
                    BitBoard::from(18085043209519168),
                    BitBoard::from(9223372036854775808),
                    BitBoard::from(0),
                    BitBoard::from(4539628424389459968),
                ],
                [
                    BitBoard::from(36170086419038336),
                    BitBoard::from(0),
                    BitBoard::from(0),
                    BitBoard::from(9151314442816847872),
                ],
            ],
        }
    }
}

pub struct Game {
    side_to_move: Color,
    precomputed: PrecomputedBitBoards
}

impl Game {
    pub fn new() -> Self {
        Self {
            side_to_move: Color::White,
            precomputed: PrecomputedBitBoards::new(),
        }
    }

    pub fn start(&mut self, fen: &str) {

        let mut board = BitPos::from_fen(fen);

        // let moves: Vec<Move> = movegen(&mut board, Color::White as u8, &self.precomputed);

        for _ in 0..20 {
            movegen(&mut board, Color::White as u8, &self.precomputed);
        }

        // for pos_move in moves {
        //     pos_move.print();
        //
        // }

        // for i in 0..30 {
        //     movegen(board, Color::White as u8, self.knight_boards);

        // }
        board.attack_white.print_index();

        board.print();

    }
}